# truncate

Remove unwanted content from the end of text by specifying what should be removed.

## Usage

```javascript
import truncate from 'verblets/src/chains/truncate/index.js';

const text = `
Core technical documentation about API endpoints and authentication.
Detailed examples showing integration patterns.
Implementation notes for advanced users.

Appendix A: Legal disclaimers and terms of service.
Appendix B: Contact information and support details.
Generated by AI assistant on 2024-01-15.
`;

const cutPoint = await truncate(text, 'Remove appendices and AI-generated content');
const cleaned = text.slice(0, cutPoint);
// Result: Core technical docs + examples + implementation notes (appendices removed)
```

## Parameters

- `text` (string) - The text to analyze for truncation
- `instructions` (string) - Description of what content should be removed
- `config` (object) - Configuration options
  - `threshold` (number) - Score threshold above which to remove content (default: 6)
  - `chunkSize` (number) - Target characters per chunk (default: 1000)

## Return Value

Returns a number representing the character index where to truncate the text.

## How It Works

1. **Chunk the text** - Breaks text into chunks at sentence boundaries
2. **Process in reverse** - Starts from the end and works backwards
3. **Score for removal** - Evaluates how well each chunk matches removal criteria
4. **Find removal point** - Stops at first chunk scoring above threshold (should be removed)
5. **Return cut point** - Returns character index where unwanted content begins

## Configuration

```javascript
const cutPoint = await truncate(text, 'Remove boilerplate and footers', {
  threshold: 7,   // Higher threshold = more aggressive removal
  chunkSize: 500  // Smaller chunks for finer control
});
```

## Usage Pattern

```javascript
// Specify what to remove from the end
const cutPoint = await truncate(text, 'Remove off-topic content and metadata');

// Apply the truncation
const cleaned = text.slice(0, cutPoint);
```